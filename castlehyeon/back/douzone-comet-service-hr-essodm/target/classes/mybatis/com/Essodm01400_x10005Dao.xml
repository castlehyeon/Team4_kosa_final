<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
   PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
   "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper
	namespace="com.douzone.comet.service.hr.essodm.dao.Essodm01400_x10005Dao">

	<select id="getUserInfo" parameterType="HashMap"
		resultType="com.douzone.comet.service.hr.essodm.models.Essodm01400_X10005_UserInfoModel">
		SELECT
		EMP_NO,
		KOR_NM,
		PSTN_CD,
		OGRP_CD,
		(SELECT
		COMET.FN_HR_UP_DEPT_NM2(COMPANY_CD, DEPT_CD , SYSDATE) FROM DUAL) AS
		ORG,
		POSI_CD
		FROM HR_EMP_MST
		WHERE COMPANY_CD = #{P_COMPANY_CD}
		AND EMP_NO
		= #{P_EMP_NO}
	</select>

	<select id="selectEssodm01400_X10005ModelList"
		parameterType="HashMap"
		resultType="com.douzone.comet.service.hr.essodm.models.Essodm01400_X10005Model">
		SELECT
		HOMX.COMPANY_CD,
		HOMX.REQ_NO,
		HOMX.REQ_DT,
		HOMX.DNLGB_CD,
		HOMX.DNL_CD,
		HOMX.START_DT,
		HOMX.END_DT,
		HOMX.ATHZ_DOC_CD,
		HOMX.ATHZ_ST_CD,
		HOMX.REQ_EMP_NO,
		HEM2.REQ_KOR_NM,
		HOMX.REASON_DC,
		HEM.EMP_NO, 
		HEM.KOR_NM,
		HEM.PSTN_CD, 
		HEM.OGRP_CD, 
		HEM.DEPT_CD,
		(SELECT COMET.FN_HR_UP_DEPT_NM2(HEM.COMPANY_CD, HEM.DEPT_CD , SYSDATE) FROM
		DUAL) AS ORG,
		HEM.POSI_CD 
		FROM HR_OFFAPPLY_MST_X10005 HOMX
		LEFT JOIN HR_EMP_MST HEM
		ON HOMX.COMPANY_CD = HEM.COMPANY_CD AND HOMX.EMP_NO = HEM.EMP_NO AND HOMX.DEPT_CD = HEM.DEPT_CD
		LEFT JOIN 
		(SELECT
		COMPANY_CD, DEPT_CD, EMP_NO, KOR_NM REQ_KOR_NM
		FROM
		HR_EMP_MST) HEM2
		ON HOMX.COMPANY_CD = HEM2.COMPANY_CD AND HOMX.REQ_EMP_NO = HEM2.EMP_NO AND HOMX.DEPT_CD = HEM2.DEPT_CD
		WHERE HOMX.DNLGB_CD = '400'
		AND HOMX.COMPANY_CD = #{P_COMPANY_CD}
		<if
			test='P_START_DT !=null and P_START_DT !="" and P_END_DT !=null and P_END_DT !=""'>
			AND START_DT BETWEEN #{P_START_DT} AND #{P_END_DT}
		</if>
		<if
			test='P_START_DT !=null and P_START_DT !="" and P_END_DT !=null and P_END_DT !=""'>
			AND END_DT BETWEEN #{P_START_DT} AND #{P_END_DT}
		</if>
	</select>

	<insert id="insertEssodm01400_X10005Model">
		INSERT INTO @{dzparam_dbname}[tableName] (
		[columnName]
		) VALUES (
		[columnValue]
		)
	</insert>

	<update id="updateEssodm01400_X10005Model">
		UPDATE @{dzparam_dbname}[tableName]
		SET [columnName] =
		[columnValue]
		WHERE
		[columnName] = [columnValue]
	</update>

	<delete id="deleteEssodm01400_X10005Model">
		DELETE
		FROM @{dzparam_dbname}[tableName]
		WHERE
		[columnName] = [columnValue]
	</delete>

</mapper>
