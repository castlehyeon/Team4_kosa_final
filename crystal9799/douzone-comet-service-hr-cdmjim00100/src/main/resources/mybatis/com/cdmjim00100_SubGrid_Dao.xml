<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
   PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
   "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.douzone.comet.service.hr.cdmjim00100.dao.cdmjim00100_SubGrid_Dao">

	<!-- 세부분류 그리드 -->
	<select id="selectcdmjim00100_left_gridList" resultType="com.douzone.comet.service.hr.cdmjim00100.models.cdmjim00100_left_grid">		
		SELECT DISTINCT ACLF_NO, VER_CD , ACLF_NO , VER_CD , AELM_CD , AELM_NM , AELM_LV
		FROM HR_JOBDIVBASE_DTL hjd 
		WHERE ACLF_NO = #{ACLF_NO}
		AND VER_CD = #{VER_CD}
		ORDER BY AELM_CD
	</select>
	
	<!-- 수행준거 내역 상단 그리드 -->
	<select id="selectcdmjim00100_right_grid1List" resultType="com.douzone.comet.service.hr.cdmjim00100.models.cdmjim00100_right_grid1">		
		SELECT DISTINCT HJD.AELM_CD
					  , HJD.ACLF_NO
					  , HJD.VER_CD 
					  , HJD.PCFM_CD 
					  , HJD.PCFM_DC 
		FROM HR_JOBDIVBASE_DTL hjd
		WHERE ACLF_NO = #{ACLF_NO}
		AND VER_CD = #{VER_CD}
		AND AELM_CD = #{AELM_CD}
		AND COMPANY_CD = #{COMPANY_CD}
		ORDER BY AELM_CD
	</select>
	
	<!-- 수행준거 내역 하단 그리드 -->
	<select id="selectcdmjim00100_right_grid2List" resultType="com.douzone.comet.service.hr.cdmjim00100.models.cdmjim00100_right_grid2">		
		WITH Filtered AS (
						    SELECT 
						        NEED_RQISIT_CD, 
						        NEED_RQISIT_NM, 
						        NEED_RQISIT_FG
						    FROM HR_JOBDIVBASE_SDTL 
						    WHERE COMPANY_CD = #{COMPANY_CD}
						          AND ACLF_NO = #{ACLF_NO}
						          AND VER_CD = #{VER_CD}
						          AND AELM_CD = #{AELM_CD}
						          AND PCFM_CD = #{PCFM_CD}
						 )
		SELECT 
		    a.NEED_RQISIT_CD,
		    a.NEED_RQISIT_NM AS NEED_RQISIT_NM1,
		    b.NEED_RQISIT_NM AS NEED_RQISIT_NM2,
		    c.NEED_RQISIT_NM AS NEED_RQISIT_NM3
		FROM 
		    (SELECT NEED_RQISIT_CD, NEED_RQISIT_NM FROM Filtered WHERE NEED_RQISIT_FG = 1) a
		LEFT JOIN 
		    (SELECT NEED_RQISIT_CD, NEED_RQISIT_NM FROM Filtered WHERE NEED_RQISIT_FG = 2) b
		ON a.NEED_RQISIT_CD = b.NEED_RQISIT_CD
		LEFT JOIN 
		    (SELECT NEED_RQISIT_CD, NEED_RQISIT_NM FROM Filtered WHERE NEED_RQISIT_FG = 3) c
		ON a.NEED_RQISIT_CD = c.NEED_RQISIT_CD
		ORDER BY NEED_RQISIT_CD
	</select>





	<insert id="insertcdmjim00100_maingrid">		
		INSERT INTO @{dzparam_dbname}[tableName] (
				[columnName]
		) VALUES (
				[columnValue]
		)		
	</insert>

	<update id="updatecdmjim00100_maingrid" >		
		UPDATE	@{dzparam_dbname}[tableName]
		SET		[columnName] = [columnValue]
		WHERE	[columnName] = [columnValue]		
	</update>

	<delete id="deletecdmjim00100_maingrid">		
		DELETE
		FROM	@{dzparam_dbname}[tableName]
		WHERE	[columnName] = [columnValue]		
	</delete>

</mapper>
