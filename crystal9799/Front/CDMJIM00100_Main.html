<!--##5877f7b4-ed70-485e-ac79-5e02c083ca8d##-->
<!--##CDMJIM00100_Main##-->
<!--##90ekm15LEeaXQKlCpFDzbRWnNf3Z9x91MD5/yVnbQLRDJHao3mam32w3xCJ9yt/j##-->
<!--
  DEWS UI/UX IDE - Build Result - v1.5
  # PageID: CDMJIM00100_Main
  # PageTitle: 직무분류관리
  # Server: http://localhost:8080/
-->
<!--

-->

<div class="dews-ui-condition-panel">
  <ul class="required-area">
    <li>
      <label class="dews-ui-multilingual">조회구분</label>
      <span>
        <select id="FG_DROP" name="FG_DROP" class="dews-ui-dropdownlist basic" data-dews-value-field="JOB_FG" data-dews-text-field="JOB_FG_NM" data-dews-show-tooltip="true" data-dews-option-label-value="" data-dews-option-label-text="" data-dews-show-value-tooltip="true" data-dews-use-numkey="false"></select>
      </span>
    </li>
    <li>
      <label class="dews-ui-multilingual">사용여부</label>
      <span>
        <select id="USE_DROP" name="USE_DROP" class="dews-ui-dropdownlist basic" data-dews-value-field="USE_YN" data-dews-text-field="USE_YN_NM" data-dews-show-tooltip="true" data-dews-show-value-tooltip="true" data-dews-use-numkey="false"></select>
      </span>
    </li>
    <li>
      <label class="dews-ui-multilingual">조회조건</label>
      <span>
        <input id="lst_ver_yn" name="lst_ver_yn" type="checkbox" class="dews-ui-checkbox" checked="checked" />
        <label for="lst_ver_yn">최종버전 조회</label>
      </span>
    </li>
  </ul>
  <ul class="optional-area">
    <li>
      <label class="dews-ui-multilingual">대분류코드</label>
      <span>
        <select id="LCLAS_MCP" name="LCLAS_MCP" class="dews-ui-multicodepicker basic" data-dews-code-field="PARAM_CD" data-dews-text-field="PARAM_NAME" data-dews-help-title="분류 도움창" data-dews-help-custom="false" data-dews-help-size="medium" />
      </span>
    </li>
    <li>
      <label class="dews-ui-multilingual">중분류코드</label>
      <span>
        <select id="MLSFC_MCP" name="MLSFC_MCP" class="dews-ui-multicodepicker basic" data-dews-code-field="PARAM_CD" data-dews-text-field="PARAM_NAME" data-dews-help-title="중분류 도움창" data-dews-help-custom="false" data-dews-help-size="medium" />
      </span>
    </li>
    <li>
      <label class="dews-ui-multilingual">소분류코드</label>
      <span>
        <select id="S_CSF_MCP" name="S_CSF_MCP" class="dews-ui-multicodepicker basic" data-dews-code-field="PARAM_CD" data-dews-text-field="PARAM_NAME" data-dews-help-title="소분류 도움창" data-dews-help-custom="false" data-dews-help-size="medium" />
      </span>
    </li>
    <li>
      <label class="dews-ui-multilingual">세분류코드</label>
      <span>
        <select id="TCLF_MCP" name="TCLF_MCP" class="dews-ui-multicodepicker basic" data-dews-code-field="PARAM_CD" data-dews-text-field="PARAM_NAME" data-dews-help-title="세분류 도움창" data-dews-help-custom="false" data-dews-help-size="medium" />
      </span>
    </li>
    <li>
      <label class="dews-ui-multilingual">능력단위코드</label>
      <span>
        <select id="ACLF_CD_MCP" name="ACLF_CD_MCP" class="dews-ui-multicodepicker basic" data-dews-code-field="PARAM_CD" data-dews-text-field="PARAM_NAME" data-dews-help-title="능력단위 도움창" data-dews-help-custom="false" data-dews-help-size="medium" />
      </span>
    </li>
    <li>
      <label class="dews-ui-multilingual">능력단위요소</label>
      <span>
        <select id="ACLF_MCP" name="ACLF_MCP" class="dews-ui-multicodepicker basic" data-dews-code-field="PARAM_CD" data-dews-text-field="PARAM_NAME" data-dews-help-title="능력단위 도움창" data-dews-help-custom="false" data-dews-help-size="medium" />
      </span>
    </li>
  </ul>
</div>
<div class="dews-button-group" style="text-align: right;">
  <h2 class="dews-ui-title">직무분류</h2>
</div>
<div class="dews-ui-container-panel" data-dews-fit-bottom="true">
  <div class="dews-container-item" data-dews-position="normal">
    <div id="main_grid" class="dews-ui-grid"></div>
  </div>
</div>
<div class="dews-button-group" style="text-align: right;">
  <h2 class="dews-ui-title">세부분류</h2>
  <button id="sub_add_btn" class="dews-ui-button">추가</button>
  <button id="sub_del_btn" class="dews-ui-button">삭제</button>
</div>
<div class="dews-ui-container-panel">
  <div class="dews-container-item" data-dews-position="left" data-dews-width="574px">
    <div id="left_grid" class="dews-ui-grid"></div>
  </div>
  <div class="dews-container-item" data-dews-position="normal">
    <div class="dews-ui-arcodien" data-dews-arcodien-height="0" data-dews-item-height="0">
      <ul>
        <li class="dews-arcodien-item" data-dews-item-title="수행준거내역" data-dews-item-height="0">
          <div id="right1_grid" class="dews-ui-grid"></div>
        </li>
      </ul>
    </div>
    <div id="right2_grid" class="dews-ui-grid"></div>
  </div>
</div>

<style>
    
</style>



<script>
  dews.ready(function () {
    var self = this;
    self.version = self.version || {};
    self.version.view='1.0';


    /*70cee10b-3521-442d-82f0-480b335cebfb*/ //# sourceURL=CDMJIM00100_Main.js
    self.USE_DROP.value("YES");
    var dialog;
    
    
    
    self.use_yn = dews.ui.dataSource('use_yn', {
      schema: {
        model: {
          fields: [
            { field: 'USE_YN', editable: false, type: 'string' }, 
            { field: 'USE_YN_NM', editable: false, type: 'string' }
          ]
    
        }
      },
      data: [{USE_YN: 'Y', USE_YN_NM: 'YES'},
    {USE_YN: 'N', USE_YN_NM: 'NO'}]
    });
    self.job_fg = dews.ui.dataSource('job_fg', {
      schema: {
        model: {
          fields: [
            { field: 'JOB_FG', editable: false, type: 'string' }, 
            { field: 'JOB_FG_NM', editable: false, type: 'string' }
          ]
    
        }
      },
      data: [{JOB_FG:"1", JOB_FG_NM:"NCS직무"},
    {JOB_FG:"2", JOB_FG_NM:"회사고유직무"}]
    });
    self.MAIN_DS = dews.ui.dataSource('MAIN_DS', {
      grid: true,
      transport: {
        read: {
          type: 'post',
          url: dews.url.getApiUrl('HR', 'Cdmjim00100_MainGrid_Service', 'cdmjim00100_MainGrid_List'),
          data: function () {
            return {
              USE_YN: self.USE_DROP.value(),
              JOB_FG: self.FG_DROP.value(),
              lst_ver_yn: self.$lst_ver_yn.prop('checked'),
              LCLAS_CD: self.LCLAS_MCP.codes().join('|'),
              MLSFC_CD: self.MLSFC_MCP.codes().join('|'),
              S_CSF_CD: self.S_CSF_MCP.codes().join('|'),
              TCLF_CD: self.TCLF_MCP.codes().join('|'),
              ACLF_CD: self.ACLF_CD_MCP.codes().join('|'),
              ACLF_LV: self.ACLF_MCP.codes().join('|')
            };
          }
        }
      },
      schema: {
        model: {
          fields: [
            { field: '_uid', editable: false, dataType: 'string' }, 
            { field: 'USE_YN', editable: false, dataType: 'string' }, 
            { field: 'JOB_FG', editable: false, dataType: 'string' }, 
            { field: 'ACLF_NO', editable: false, dataType: 'string' }, 
            { field: 'VER_CD', editable: false, dataType: 'string' }, 
            { field: 'LCLAS_CD', editable: false, dataType: 'string' }, 
            { field: 'LCLAS_NM', editable: false, dataType: 'string' }, 
            { field: 'MLSFC_CD', editable: false, dataType: 'string' }, 
            { field: 'MLSFC_NM', editable: false, dataType: 'string' }, 
            { field: 'S_CSF_CD', editable: false, dataType: 'string' }, 
            { field: 'S_CSF_NM', editable: false, dataType: 'string' }, 
            { field: 'TCLF_CD', editable: false, dataType: 'string' }, 
            { field: 'TCLF_NM', editable: false, dataType: 'string' }, 
            { field: 'ACLF_CD', editable: false, dataType: 'string' }, 
            { field: 'ACLF_NM', editable: false, dataType: 'string' }, 
            { field: 'ACLF_LV', editable: false, dataType: 'number' }, 
            { field: 'ACLF_TXT', editable: false, dataType: 'string' }, 
            { field: 'COMPANY_CD', editable: false, dataType: 'string' }
          ]
    
        }
      }
    });
    self.LEFT_DS = dews.ui.dataSource('LEFT_DS', {
      grid: true,
      transport: {
        read: {
          type: 'post',
          url: dews.url.getApiUrl('HR', 'Cdmjim00100_SubGrid_Service', 'selectcdmjim00100_left_gridList'),
          data: /*18bdd294-f1da-4fea-847b-d4f5bc1356de*/ function() {
        return {
            ACLF_NO: self.main_grid.getCellValue(self.main_grid.select(), "ACLF_NO"),
            VER_CD: self.main_grid.getCellValue(self.main_grid.select(), "VER_CD")
        }
    }
        }
      },
      schema: {
        model: {
          fields: [
            { field: 'AELM_CD', editable: false, dataType: 'string' }, 
            { field: 'ACLF_NO', editable: false, dataType: 'string' }, 
            { field: 'VER_CD', editable: false, dataType: 'string' }, 
            { field: 'AELM_NM', editable: false, dataType: 'string' }, 
            { field: 'AELM_LV', editable: false, dataType: 'number' }, 
            { field: '_uid', editable: false, dataType: 'string' }, 
            { field: 'OG_AELM_CD', editable: false, dataType: 'string' }
          ]
    
        }
      }
    });
    self.RIGHT1_DS = dews.ui.dataSource('RIGHT1_DS', {
      grid: true,
      transport: {
        read: {
          type: 'post',
          url: dews.url.getApiUrl('HR', 'Cdmjim00100_SubGrid_Service', 'selectcdmjim00100_right_grid1List'),
          data: /*ce349233-d50a-4fc0-96ea-30945b1bcb4a*/ function() {
        return {
        ACLF_NO: self.left_grid.getCellValue(self.left_grid.select(), "ACLF_NO"),
        VER_CD: self.left_grid.getCellValue(self.left_grid.select(), "VER_CD"),
        AELM_CD: self.left_grid.getCellValue(self.left_grid.select(), "AELM_CD")
        }
    }
        }
      },
      schema: {
        model: {
          fields: [
            { field: 'ACLF_NO', editable: false, dataType: 'string' }, 
            { field: 'VER_CD', editable: false, dataType: 'string' }, 
            { field: 'AELM_CD', editable: false, dataType: 'string' }, 
            { field: 'AELM_NM', editable: false, dataType: 'string' }, 
            { field: 'PCFM_CD', editable: false, dataType: 'string' }, 
            { field: 'PCFM_DC', editable: false, dataType: 'string' }, 
            { field: '_uid', editable: false, dataType: 'string' }, 
            { field: 'AELM_LV', editable: false, dataType: 'number' }, 
            { field: 'OG_PCFM_CD', editable: false, dataType: 'string' }
          ]
    
        }
      }
    });
    self.RIGHT2_DS = dews.ui.dataSource('RIGHT2_DS', {
      grid: true,
      transport: {
        read: {
          type: 'post',
          url: dews.url.getApiUrl('HR', 'Cdmjim00100_SubGrid_Service', 'selectcdmjim00100_right_grid2List'),
          data: /*272933d0-986d-40ab-bef4-f9c13e4259ff*/ function() {
        return {
            ACLF_NO: self.right1_grid.getCellValue(self.right1_grid.select(), "ACLF_NO"),
            VER_CD: self.right1_grid.getCellValue(self.right1_grid.select(), "VER_CD"),
            PCFM_CD: self.right1_grid.getCellValue(self.right1_grid.select(), "PCFM_CD"),
            AELM_CD: self.right1_grid.getCellValue(self.right1_grid.select(), "AELM_CD")
        }
    }
        }
      },
      schema: {
        model: {
          fields: [
            { field: 'NEED_RQISIT_CD', editable: false, dataType: 'string' }, 
            { field: 'NEED_RQISIT_NM1', editable: false, dataType: 'string' }, 
            { field: 'NEED_RQISIT_NM2', editable: false, dataType: 'string' }, 
            { field: 'NEED_RQISIT_NM3', editable: false, dataType: 'string' }, 
            { field: 'ACLF_NO', editable: false, dataType: 'string' }, 
            { field: 'VER_CD', editable: false, dataType: 'string' }, 
            { field: 'AELM_CD', editable: false, dataType: 'string' }, 
            { field: 'PCFM_CD', editable: false, dataType: 'string' }
          ]
    
        }
      }
    });
    
    
    dews.ui.mainbuttons.information.disable(true);
    dews.ui.mainbuttons.localize.disable(true);
    dews.ui.mainbuttons.etnapproval.hide();
    dews.ui.mainbuttons.add.click(/*0726422b-af2b-48f3-921d-2bdaf1c69db5*/ function () {
        // TODO: 그리드에 데이터를 추가합니다.
        self.main_grid.addRow();
        self.main_grid.setCellValue(self.main_grid.select(), "USE_YN", 'Y');
    });
    dews.ui.mainbuttons.search.click(/*57f1e984-d23f-421a-9d7b-eaff278f1930*/ function () {
    
        // TODO: 필수항목 입력을 체크한 후 데이터소스를 조회합니다.
        // if (self.searchCondition.validate({tooltip:true,message:'필수 항목을 입력해 주십시요.'}))
        // {
        //     self.dataSource1.read();
        // }
    
        // TODO: 저장여부를 확인한 후 데이터소스를 조회합니다.
        if (self.MAIN_DS.getDirtyDataCount() != 0) {
            dews.confirm('저장하지 않은 데이터가 있습니다. 조회를 계속하시겠습니까?', 'ico2').yes(function () {
                self.MAIN_DS.read();
            }).no(function () {
                dews.ui.snackbar.warning('취소되었습니다.');
                return false;
            });
        } else {
            self.MAIN_DS.read();
        }
    });
    dews.ui.mainbuttons.delete.click(/*73806b2e-5c88-44a2-8b38-ed42b61577ba*/ function () {
        // TODO: 삭제시 강제 팝업에 대한 알림창을 끕니다.
        self.mainButtons.delete.useDefaultConfirm = false;
    
        // TODO: 그리드에서 체크된 항목을 삭제합니다.
        // if (self.main_grid.getCheckedIndex().length == 0) {
        //     dews.alert('선택된 데이터가 없습니다.', 'warning');
        //     return false;
        // }
        self.main_grid.removeRow(self.main_grid.getCheckedIndex());
    
        // TODO: 그리드에 선택된 항목을 삭제합니다.
        self.main_grid.removeRow(self.main_grid.select());
    });
    dews.ui.mainbuttons.save.click(/*2d23a3b2-21fb-4697-8d65-5f7fc24ad853*/ function () {
        // TODO: 데이터소스를 저장합니다.
        if (self.MAIN_DS.getDirtyDataCount() + self.LEFT_DS.getDirtyDataCount() + self.RIGHT1_DS.getDirtyDataCount() + self.RIGHT2_DS.getDirtyDataCount() == 0) {
            dews.alert('변경된 데이터가 없습니다.');
            // self.MAIN_DS.read();
            return false;
        }
        //
        if (self.main_grid.validate().result == false) {
            dews.alert('필수 값이 입력되지 않은 항목이 있습니다.');
            return false;
        }
        //
        // 서비스 파라미터명과 데이터소스명이 같은경우
        dews.confirm('저장하시겠습니까?', 'ico2').yes(function () {
            if (self.MAIN_DS.getDirtyDataCount() != 0) {
                self.MAIN_DS.batchSave(dews.url.getApiUrl('HR', 'Cdmjim00100_MainGrid_Service', 'cdmjim00100_MainGrid_Save'))
                    .done(function (data) {
                        dews.ui.snackbar.ok('저장되었습니다.');
                        dews.ui.loading.show({
                            text: '조회중입니다.'
                        });
                        self.MAIN_DS.read();
                        self.LEFT_DS.read();
                        self.RIGHT1_DS.read();
                        self.RIGHT2_DS.read();
                    }).fail(function (message) {
                        dews.ui.snackbar.warning(message);
                    }).always(function () {
                        dews.ui.loading.hide();
                    });
            }
    
            if (self.LEFT_DS.getDirtyDataCount() != 0) {
                // self.left_grid.setCellValue(self.left_grid.select(), "OG_AELM_CD", self.left_grid.getCellValue(self.left_grid.select(), "AELM_CD"), false);
                self.LEFT_DS.batchSave(dews.url.getApiUrl('HR', 'Cdmjim00100_SubGrid_Service', 'cdmjim00100_Leftgrid_Save'))
                    .done(function (data) {
                        dews.ui.snackbar.ok('저장되었습니다.');
                        dews.ui.loading.show({
                            text: '조회중입니다.'
                        });
                        self.MAIN_DS.read();
                        self.LEFT_DS.read();
                        self.RIGHT1_DS.read();
                        self.RIGHT2_DS.read();
                    }).fail(function (message) {
                        dews.ui.snackbar.warning(message);
                    }).always(function () {
                        dews.ui.loading.hide();
                    });
            }
            if (self.RIGHT1_DS.getDirtyDataCount() != 0) {
                // self.right1_grid.setCellValue(self.right1_grid.select(), "ORG_PCFM_CD", self.right1_grid.getCellValue(self.right1_grid.select(), "PCFM_CD"));
                self.RIGHT1_DS.batchSave(dews.url.getApiUrl('HR', 'Cdmjim00100_SubGrid_Service', 'cdmjim00100_Right1grid_Save'))
                    .done(function (data) {
                        dews.ui.snackbar.ok('저장되었습니다.');
                        dews.ui.loading.show({
                            text: '조회중입니다.'
                        });
                        self.MAIN_DS.read();
                        self.RIGHT1_DS.read();
                        self.RIGHT2_DS.read();
                    }).fail(function (message) {
                        dews.ui.snackbar.warning(message);
                    }).always(function () {
                        dews.ui.loading.hide();
                    });
            }
            if (self.RIGHT2_DS.getDirtyDataCount() != 0) {
                // self.right1_grid.setCellValue(self.right1_grid.select(), "ORG_PCFM_CD", self.right1_grid.getCellValue(self.right1_grid.select(), "PCFM_CD"));
                self.RIGHT2_DS.batchSave(dews.url.getApiUrl('HR', 'Cdmjim00100_SubGrid_Service', 'cdmjim00100_Right2grid_Save'))
                    .done(function (data) {
                        dews.ui.snackbar.ok('저장되었습니다.');
                        dews.ui.loading.show({
                            text: '조회중입니다.'
                        });
                        self.MAIN_DS.read();
                        self.RIGHT2_DS.read();
                    }).fail(function (message) {
                        dews.ui.snackbar.warning(message);
                    }).always(function () {
                        dews.ui.loading.hide();
                    });
            }
        }).no(function () {
            dews.ui.snackbar.warning('취소되었습니다.');
        });
    
    });
    self.FG_DROP.setDataSource(self.job_fg);
    self.USE_DROP.setDataSource(self.use_yn);
    self.LCLAS_MCP.on('codedialog', /*187062f6-2e49-4683-a614-436f80948ec5*/ function (e) {
        // 코드피커 다이얼로그가 실행될 때 호출
        console.log('LCLAS_MCP Codepicker-codedialog event');
        createDialog("LCLAS_CD")
        self.MLSFC_MCP.clear();
        self.S_CSF_MCP.clear();
        self.TCLF_MCP.clear();
        self.ACLF_CD_MCP.clear();
        self.ACLF_MCP.clear();
        var initData = {
            params: {
                param_name: "LCLAS_NM",
                param_cd: "LCLAS_CD"
            }
        };
    
        dialog.setInitData(initData);
        dialog.open();
    
    
    });
    self.MLSFC_MCP.on('codedialog', /*218cc958-2505-4969-b084-3fa724f4d6a5*/ function (e) {
    
        createDialog("MLSFC_CD");
        self.S_CSF_MCP.clear();
        self.TCLF_MCP.clear();
        self.ACLF_CD_MCP.clear();
        self.ACLF_MCP.clear();
        // 코드피커 다이얼로그가 실행될 때 호출
        console.log('MLSFC_MCP Codepicker-codedialog event');
    
        var initData = {
            params: {
                param_name: "MLSFC_NM",
                param_cd: "MLSFC_CD"
            }
        };
    
        dialog.setInitData(initData);
        dialog.open();
    });
    self.S_CSF_MCP.on('codedialog', /*2a9affdd-8dea-48be-95c4-d312b276c2d7*/ function (e) {
        // 코드피커 다이얼로그가 실행될 때 호출
    
        createDialog("S_CSF_CD")
        self.TCLF_MCP.clear();
        self.ACLF_CD_MCP.clear();
        self.ACLF_MCP.clear();
    
        console.log('S_CSF_MCP Codepicker-codedialog event');
    
        var initData = {
            params: {
                param_name: "S_CSF_NM",
                param_cd: "S_CSF_CD"
            }
        };
    
        dialog.setInitData(initData);
        dialog.open();
    });
    self.TCLF_MCP.on('codedialog', /*b1896e7d-46a5-4fbf-84f3-1939af3228ea*/ function (e) {
    
    
    
        createDialog("TCLF_CD")
        self.ACLF_CD_MCP.clear();
        self.ACLF_MCP.clear();
    
        // 코드피커 다이얼로그가 실행될 때 호출
        console.log('TCLF_MCP Codepicker-codedialog event');
    
        var initData = {
            params: {
                param_name: "TCLF_NM",
                param_cd: "TCLF_CD"
            }
        };
    
        dialog.setInitData(initData);
        dialog.open();
    });
    self.ACLF_CD_MCP.on('codedialog', /*989fa6b7-44a3-42ad-a885-21961484f02d*/ function (e) {
        // 코드피커 다이얼로그가 실행될 때 호출
        console.log('ACLF_CD_MCP Codepicker-codedialog event');
    
        createDialog("ACLF_CD")
        self.ACLF_CD_MCP.clear();
    
        var initData = {
            params: {
                param_name: "ACLF_NM",
                param_cd: "ACLF_CD"
            }
        };
    
        dialog.setInitData(initData);
        dialog.open();
    });
    self.ACLF_MCP.on('codedialog', /*ee176f96-8b79-49f9-96bf-168bea06e3eb*/ function (e) {
        // 코드피커 다이얼로그가 실행될 때 호출
        console.log('ACLF_CD_MCP Codepicker-codedialog event');
        self.ACLF_MCP.clear();
        createDialog("ACLF_LV")
    
        var initData = {
            params: {
                param_name: "ACLF_TXT",
                param_cd: "ACLF_LV"
            }
        };
    
        dialog.setInitData(initData);
        dialog.open();
    });
    dews.ui.grid(self.$main_grid, {
      dataSource: self.MAIN_DS,
      height: 295,
      editable: true,
      selectable: true,
      sortable: false,
      copyMode: 'cell',
      columns: [
        {
          field: 'USE_YN',
          title: '사용여부',
          width: 60,
          attributes: { class: 'required' },
          editor: {
            type: 'dropDown',
            dataSource: self.use_yn,
            dataValueField: 'USE_YN',
            dataTextField: 'USE_YN_NM'
          }
        },
        {
          field: 'JOB_FG',
          title: '직업구분',
          width: 50,
          attributes: { class: 'required' },
          editor: {
            type: 'dropDown',
            dataSource: self.job_fg,
            dataValueField: 'JOB_FG',
            dataTextField: 'JOB_FG_NM'
          }
        },
        {
          field: 'ACLF_NO',
          title: '능력분류번호',
          width: 120,
          editor: { type: 'string', maxLength: 0, editable: false }
        },
        {
          field: 'VER_CD',
          title: '버전코드',
          width: 80,
          editor: {
            type: 'mask',
            editable: false
          }
        },
        {
          field: 'LCLAS_CD',
          title: '대분류코드',
          width: 80,
          editor: {
            type: 'mask',
            editable: false
          }
        },
        {
          field: 'LCLAS_NM',
          title: '대분류명',
          width: 90,
          editor: { type: 'string', maxLength: 0, editable: /*68b5d288-e172-4414-948b-e8929ee03b32*/ function(e) {
      if(this.getRowState(e.row.index) === "added"){
        return true;
      }
      else {
        var jobFg = self.main_grid.getCellValue(e.row.index, 'JOB_FG');
        if(jobFg == '1') {
          return false;
        }else if(jobFg == '2') {
          return true;
        }
      }
    } }
        },
        {
          field: 'MLSFC_CD',
          title: '중분류코드',
          width: 80,
          editor: { type: 'string', maxLength: 0, editable: false }
        },
        {
          field: 'MLSFC_NM',
          title: '중분류명',
          width: 90,
          editor: { type: 'string', maxLength: 0, editable: /*4dd63d98-b957-4973-9713-5ee51e3a3815*/ function(e) {
      if(this.getRowState(e.row.index) === "added"){
        return true;
      }
      else {
        var jobFg = self.main_grid.getCellValue(e.row.index, 'JOB_FG');
        if(jobFg == '1') {
          return false;
        }else if(jobFg == '2') {
          return true;
        }
      }
    } }
        },
        {
          field: 'S_CSF_CD',
          title: '소분류코드',
          width: 80,
          editor: { type: 'string', maxLength: 0, editable: false }
        },
        {
          field: 'S_CSF_NM',
          title: '소분류명',
          width: 90,
          editor: { type: 'string', maxLength: 0, editable: /*dac1fb57-ab1a-414c-8e0e-0ae13af89b05*/ function(e) {
      if(this.getRowState(e.row.index) === "added"){
        return true;
      }
      else {
        var jobFg = self.main_grid.getCellValue(e.row.index, 'JOB_FG');
        if(jobFg == '1') {
          return false;
        }else if(jobFg == '2') {
          return true;
        }
      }
    } }
        },
        {
          field: 'TCLF_CD',
          title: '세분류코드',
          width: 80,
          editor: { type: 'string', maxLength: 0, editable: false }
        },
        {
          field: 'TCLF_NM',
          title: '세분류명',
          width: 90,
          editor: { type: 'string', maxLength: 0, editable: /*bd45edcc-2d83-4be5-9bbf-9cb1eafbc914*/ function(e) {
      if(this.getRowState(e.row.index) === "added"){
        return true;
      }
      else {
        var jobFg = self.main_grid.getCellValue(e.row.index, 'JOB_FG');
        if(jobFg == '1') {
          return false;
        }else if(jobFg == '2') {
          return true;
        }
      }
    } }
        },
        {
          field: 'ACLF_CD',
          title: '능력분류코드',
          width: 80,
          editor: { type: 'string', maxLength: 0, editable: false }
        },
        {
          field: 'ACLF_NM',
          title: '능력분류명',
          width: 180,
          editor: { type: 'string', maxLength: 0, editable: /*98710712-4a92-4ecc-a29f-0cc381758fc3*/ function(e) {
      if(this.getRowState(e.row.index) === "added"){
        return true;
      }
      else {
        var jobFg = self.main_grid.getCellValue(e.row.index, 'JOB_FG');
        if(jobFg == '1') {
          return false;
        }else if(jobFg == '2') {
          return true;
        }
      }
    } }
        },
        {
          field: 'ACLF_LV',
          title: '능력분류레벨',
          width: 60,
          editor: { type: 'string', maxLength: 0, editable: /*62c1a0fb-acfd-4074-8441-6e97e99f28e3*/ function(e) {
      if(this.getRowState(e.row.index) === "added"){
        return true;
      }
      else {
        var jobFg = self.main_grid.getCellValue(e.row.index, 'JOB_FG');
        if(jobFg == '1') {
          return false;
        }else if(jobFg == '2') {
          return true;
        }
      }
    } }
        },
        {
          field: 'ACLF_TXT',
          title: '능력분류텍스트',
          width: 400,
          align: 'left',
          editor: { type: 'string', maxLength: 0, editable: /*16f34412-ea8c-4b40-8408-8ff89c728083*/ function(e) {
      if(this.getRowState(e.row.index) === "added"){
        return true;
      }
      else {
        var jobFg = self.main_grid.getCellValue(e.row.index, 'JOB_FG');
        if(jobFg == '1') {
          return false;
        }else if(jobFg == '2') {
          return true;
        }
      }
    } }
        },
        {
          field: 'COMPANY_CD',
          title: '회사코드',
          width: 80,
          visible: false
        },
        {
          field: '_uid',
          title: 'UID',
          width: 60,
          visible: false
        }
      ],
      fixed: {
        colCount: 0,
        rightColCount: 0
      },
      change: /*6fa43097-3321-45f2-b6e7-23d35427e057*/ function (e) {
            self.LEFT_DS.read();
        }
    ,
      dataBound: /*7725c6bd-73cc-4c55-9926-45e7f49d03f3*/ function (e) {
    
        }
    ,
      clicked: /*8bc71cbd-875f-47df-9a4b-3d22918465b0*/ function (e) {
            self.LEFT_DS.read();
        }
    ,
      dblClicked: /*0cba9f99-3fc3-4569-b8c3-73a80486ac55*/ function (e) {
            if ((self.main_grid.getCellValue(self.main_grid.select(), "ACLF_NO") == undefined)) {
                var dialog = dews.ui.dialog('FG_Dialog',
                    {
                        url: '~/view/HR/CDMJIM00100_Modal.html',
                        title: '직무분류 도움',
                        size: 'large',
                        height: 600,
                        width: 800,
                        button: 'applyAndClose',
                        initData: {
                            param_name: "test_nm",
                            param_cd: "test_cd"
                        },
                        ok: function (data) {
                            dialog.on('closed', function (e) {
                                console.log(data);
                                self.main_grid.setCellValue(self.main_grid.select(), "LCLAS_CD", data.LCLAS_CD);
                                self.main_grid.setCellValue(self.main_grid.select(), "LCLAS_NM", data.LCLAS_NM);
                                self.main_grid.setCellValue(self.main_grid.select(), "MLSFC_CD", data.MLSFC_CD);
                                self.main_grid.setCellValue(self.main_grid.select(), "MLSFC_NM", data.MLSFC_NM);
                                self.main_grid.setCellValue(self.main_grid.select(), "S_CSF_CD", data.S_CSF_CD);
                                self.main_grid.setCellValue(self.main_grid.select(), "S_CSF_NM", data.S_CSF_NM);
                                self.main_grid.setCellValue(self.main_grid.select(), "TCLF_CD", data.TCLF_CD);
                                self.main_grid.setCellValue(self.main_grid.select(), "TCLF_NM", data.TCLF_NM);
                                self.main_grid.setCellValue(self.main_grid.select(), "ACLF_CD", data.ACLF_CD);
                                self.main_grid.setCellValue(self.main_grid.select(), "ACLF_NM", data.ACLF_NM);
                                self.main_grid.setCellValue(self.main_grid.select(), "ACLF_NO", data.ACLF_NO);
                                self.main_grid.setCellValue(self.main_grid.select(), "COMPANY_CD", self.user.companyCode);
                            });
                        }
                    });
                dialog.open();
            } else if (self.main_grid.getCellValue(self.main_grid.select(), "JOB_FG") == 1) {
                dews.ui.snackbar.warning(dews.localize.get("NCS표준코드는 수정할 수 없습니다."));
            }
        }
    
    });
    self.$sub_add_btn.on('click', /*c87f01c7-0cbc-4755-a8d1-cd98e777bc2a*/ function (e) {
        if (self.main_grid.getCellValue(self.main_grid.select(), "JOB_FG") == 1) {
            dews.ui.snackbar.warning(dews.localize.get("NCS표준코드는 수정할 수 없습니다."));
        } else {
            if (self.left_grid.focused) {
                self.left_grid.addRow();
                self.left_grid.setCellValue(self.left_grid.select(), "ACLF_NO", self.main_grid.getCellValue(self.main_grid.select(), "ACLF_NO"), false, false);
                self.left_grid.setCellValue(self.left_grid.select(), "VER_CD", self.main_grid.getCellValue(self.main_grid.select(), "VER_CD"));
            } else if (self.right1_grid.focused) {
                if (self.left_grid.getCellValue(self.left_grid.select(), "AELM_CD") == undefined) {
                    dews.ui.snackbar.warning(dews.localize.get("세부 분류를 먼저 입력 해야 합니다."));
                } else {
                    self.right1_grid.addRow();
                    self.right1_grid.setCellValue(self.right1_grid.select(), "ACLF_NO", self.left_grid.getCellValue(self.left_grid.select(), "ACLF_NO"), false, false);
                    self.right1_grid.setCellValue(self.right1_grid.select(), "AELM_CD", self.left_grid.getCellValue(self.left_grid.select(), "AELM_CD"), false, false);
                    self.right1_grid.setCellValue(self.right1_grid.select(), "AELM_NM", self.left_grid.getCellValue(self.left_grid.select(), "AELM_NM"), false, false);
                    self.right1_grid.setCellValue(self.right1_grid.select(), "VER_CD", self.main_grid.getCellValue(self.main_grid.select(), "VER_CD"), false, false);
                    self.right1_grid.setCellValue(self.right1_grid.select(), "AELM_NM", self.left_grid.getCellValue(self.left_grid.select(), "AELM_NM"), false, false);
                    self.right1_grid.setCellValue(self.right1_grid.select(), "AELM_LV", self.left_grid.getCellValue(self.left_grid.select(), "AELM_LV"), false, false);
                    // self.right1_grid.setCellValue(self.right1_grid.select(), "PCFM_CD", self.right1_grid.select() + 1, false, false);
                }
            } else if (self.right2_grid.focused) {
                if (self.right1_grid.getCellValue(self.right1_grid.select(), "ACLF_NO") == undefined) {
                    dews.ui.snackbar.warning(dews.localize.get("수행 준거 내역을 먼저 입력 해야 합니다."));
                } else {
                    self.right2_grid.addRow();
                    self.right2_grid.setCellValue(self.right2_grid.select(), "ACLF_NO", self.right1_grid.getCellValue(self.right1_grid.select(), "ACLF_NO"));
                    self.right2_grid.setCellValue(self.right2_grid.select(), "VER_CD", self.right1_grid.getCellValue(self.right1_grid.select(), "VER_CD"));
                    self.right2_grid.setCellValue(self.right2_grid.select(), "AELM_CD", self.right1_grid.getCellValue(self.right1_grid.select(), "AELM_CD"));
                    self.right2_grid.setCellValue(self.right2_grid.select(), "PCFM_CD", self.right1_grid.getCellValue(self.right1_grid.select(), "PCFM_CD"));
                }
            }
        }
    });
    self.$sub_del_btn.on('click', /*264a6856-7649-437b-801a-f577674199af*/ function (e) {
        if (self.main_grid.getCellValue(self.main_grid.select(), "JOB_FG") == 1) {
            dews.ui.snackbar.warning(dews.localize.get("NCS표준코드는 수정할 수 없습니다."));
        } else {
            if (self.left_grid.focused) {
                self.left_grid.removeRow(self.left_grid.select());
            } else if (self.right1_grid.focused) {
                self.right1_grid.removeRow(self.right1_grid.select());
            } else if (self.right2_grid.focused) {
                self.right2_grid.removeRow(self.right2_grid.select());
            }
        }
    });
    dews.ui.grid(self.$left_grid, {
      dataSource: self.LEFT_DS,
      height: 200,
      editable: true,
      sortable: false,
      checkable: false,
      copyMode: 'cell',
      columns: [
        {
          field: 'ACLF_NO',
          title: '능력분류번호',
          width: 60,
          visible: false
        },
        {
          field: 'VER_CD',
          title: '버전코드',
          width: 80,
          visible: false
        },
        {
          field: 'AELM_CD',
          title: '능력요소코드',
          width: 80,
          attributes: { class: 'required' },
          editor: { type: 'string', maxLength: 0, editable: /*ceed9d5e-9f1c-4f4b-908f-99ee67d55150*/ function(e) {
      if(this.getRowState(e.row.index) === "added"){
        return true;
      }
      else {
        var fg = self.main_grid.getCellValue(self.main_grid.select(), 'JOB_FG');
        if(fg == '1') {
          return false;
        }else if(fg == '2') {
          return true;
        }
      }
    } }
        },
        {
          field: 'AELM_NM',
          title: '능력요소명',
          width: 70,
          align: 'left',
          editor: { type: 'string', maxLength: 0, editable: /*6e9fa597-257b-4c4f-ac59-41ab19cff3f2*/ function(e) {
      if(this.getRowState(e.row.index) === "added"){
        return true;
      }
      else {
        var fg = self.main_grid.getCellValue(self.main_grid.select(), 'JOB_FG');
        if(fg == '1') {
          return false;
        }else if(fg == '2') {
          return true;
        }
      }
    } }
        },
        {
          field: 'AELM_LV',
          title: '능력요소레벨',
          width: 80,
          editor: { type: 'string', maxLength: 0, editable: /*9fe11847-11e0-4b04-8e76-1b5b47c2e3ce*/ function(e) {
      if(this.getRowState(e.row.index) === "added"){
        return true;
      }
      else {
        var fg = self.main_grid.getCellValue(self.main_grid.select(), 'JOB_FG');
        if(fg == '1') {
          return false;
        }else if(fg == '2') {
          return true;
        }
      }
    } }
        },
        {
          field: '_uid',
          title: '_uid',
          width: 60,
          visible: false
        },
        {
          field: 'OG_AELM_CD',
          title: '능력분류번호',
          width: 80,
          visible: false
        }
      ],
      fixed: {
        colCount: 0,
        rightColCount: 0
      },
      change: /*e4623438-3537-4eb6-8ace-48d9a62c4026*/ function (e) {
            self.RIGHT1_DS.read();
        }
    ,
      dblClicked: /*55f68e93-9b8f-44ee-b186-f0d2c0c1dc69*/ function (e) {
            if (self.main_grid.getCellValue(self.main_grid.select(), "JOB_FG") == 1) {
                dews.ui.snackbar.warning(dews.localize.get("NCS표준코드는 수정할 수 없습니다."));
            }
        }
    
    });
    dews.ui.grid(self.$right1_grid, {
      dataSource: self.RIGHT1_DS,
      height: 200,
      editable: true,
      sortable: false,
      checkable: false,
      copyMode: 'cell',
      columns: [
        {
          field: 'ACLF_NO',
          title: '능력분류번호',
          width: 60,
          visible: false
        },
        {
          field: 'VER_CD',
          title: '버전코드',
          width: 80,
          visible: false
        },
        {
          field: 'AELM_CD',
          title: '능력요소코드',
          width: 80,
          visible: false
        },
        {
          field: 'AELM_NM',
          title: '능력요소명',
          width: 90,
          align: 'left',
          visible: false
        },
        {
          field: 'AELM_LV',
          title: '능력요소레벨',
          width: 60,
          visible: false
        },
        {
          field: 'PCFM_CD',
          title: '수행준거코드',
          width: 80,
          attributes: { class: 'required' },
          editor: { type: 'string', maxLength: 0, editable: /*42614219-cdb0-4c82-b6b6-72478fbab19a*/ function(e) {
      if(this.getRowState(e.row.index) === "added"){
        return true;
      }
      else {
        var fg = self.main_grid.getCellValue(self.main_grid.select(), 'JOB_FG');
        if(fg == '1') {
          return false;
        }else if(fg == '2') {
          return true;
        }
      }
    } }
        },
        {
          field: 'PCFM_DC',
          title: '수행준거내역',
          width: 120,
          align: 'left',
          editor: { type: 'string', maxLength: 0, editable: /*31c22703-2f7f-492d-bc56-92233f7ff305*/ function(e) {
      if(this.getRowState(e.row.index) === "added"){
        return true;
      }
      else {
        var fg = self.main_grid.getCellValue(self.main_grid.select(), 'JOB_FG');
        if(fg == '1') {
          return false;
        }else if(fg == '2') {
          return true;
        }
      }
    } }
        },
        {
          field: '_uid',
          title: '_uid',
          width: 60,
          visible: false
        },
        {
          field: 'ORG_PCFM_CD',
          title: '수행준거코드',
          width: 80,
          visible: false
        }
      ],
      fixed: {
        colCount: 0,
        rightColCount: 0
      },
      dblClicked: /*716e9cbf-51f8-4c8a-b3a7-7fd1957735f9*/ function (e) {
            if (self.main_grid.getCellValue(self.main_grid.select(), "JOB_FG") == 1) {
                dews.ui.snackbar.warning(dews.localize.get("NCS표준코드는 수정할 수 없습니다."));
            }
        }
    
    });
    dews.ui.grid(self.$right2_grid, {
      dataSource: self.RIGHT2_DS,
      height: 161,
      editable: true,
      sortable: false,
      checkable: false,
      copyMode: 'cell',
      columns: [
        {
          field: 'NEED_RQISIT_CD',
          title: '필요요건코드',
          width: 80,
          visible: false
        },
        {
          field: 'NEED_RQISIT_NM1',
          title: '필요지식',
          width: 60,
          editor: { type: 'string', maxLength: 0, editable: /*8cb675d9-d8a8-4446-a4e5-a49c794ad49f*/ function(e) {
      if(this.getRowState(e.row.index) === "added"){
        return true;
      }
      else {
        var fg = self.main_grid.getCellValue(self.main_grid.select(), 'JOB_FG');
        if(fg == '1') {
          return false;
        }else if(fg == '2') {
          return true;
        }
      }
    } }
        },
        {
          field: 'NEED_RQISIT_NM2',
          title: '필요기술',
          width: 90,
          align: 'left',
          editor: { type: 'string', maxLength: 0, editable: /*b598ebf9-cc5c-4446-a338-888e3eb4f464*/ function(e) {
      if(this.getRowState(e.row.index) === "added"){
        return true;
      }
      else {
        var fg = self.main_grid.getCellValue(self.main_grid.select(), 'JOB_FG');
        if(fg == '1') {
          return false;
        }else if(fg == '2') {
          return true;
        }
      }
    } }
        },
        {
          field: 'NEED_RQISIT_NM3',
          title: '필요역량',
          width: 60,
          align: 'left',
          editor: { type: 'string', maxLength: 0, editable: /*6501dc64-bc06-4723-9c56-d29ccbead723*/ function(e) {
      if(this.getRowState(e.row.index) === "added"){
        return true;
      }
      else {
        var fg = self.main_grid.getCellValue(self.main_grid.select(), 'JOB_FG');
        if(fg == '1') {
          return false;
        }else if(fg == '2') {
          return true;
        }
      }
    } }
        },
        {
          field: 'ACLF_NO',
          title: '능력분류번호',
          width: 60,
          visible: false
        },
        {
          field: 'VER_CD',
          title: '버전코드',
          width: 80,
          visible: false
        },
        {
          field: 'AELM_CD',
          title: '능력요소코드',
          width: 80,
          visible: false
        },
        {
          field: 'PCFM_CD',
          title: '수행준거코드',
          width: 80,
          visible: false
        }
      ],
      fixed: {
        colCount: 0,
        rightColCount: 0
      },
      dblClicked: /*ba7779be-ca3f-433f-89fc-3352001a69a8*/ function (e) {
            if (self.main_grid.getCellValue(self.main_grid.select(), "JOB_FG") == 1) {
                dews.ui.snackbar.warning(dews.localize.get("NCS표준코드는 수정할 수 없습니다."));
            }
        }
    
    });
    
    
    self.main_grid.setDetail(self.left_grid);
    self.left_grid.setDetail(self.right1_grid);
    self.right1_grid.setDetail(self.right2_grid);
    
    
    /*46447d39-a189-4af8-8358-3b129af29437*/ var self = this;
    
    function createDialog(variant) {
    
        dialog = dialog = dews.ui.dialog("MAIN_DIALOG",
            {
                url: "~/view/HR/CDMJIM00100_Modal2",
                title: "분류 도움창",
                width: 500,
                height: 500,
                button: 'applyAndClose',
                ok: function (data) {
                    switch (variant) {
                        case "LCLAS_CD":
                            self.LCLAS_MCP.setData(data);
                            break;
                        case "MLSFC_CD":
                            self.MLSFC_MCP.setData(data);
                            break;
                        case "S_CSF_CD":
                            self.S_CSF_MCP.setData(data);
                            break;
                        case "TCLF_CD":
                            self.TCLF_MCP.setData(data);
                            break;
                        case "ACLF_CD":
                            self.ACLF_CD_MCP.setData(data);
                            break;
                        case "ACLF_LV":
                            self.ACLF_MCP.setData(data);
                            break;
                    }
                }
            });
    
    }
    
    
    
    
    
    

  
  });

</script>